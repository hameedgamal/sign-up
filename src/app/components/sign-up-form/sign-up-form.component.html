<app-notification
  [notificationState]="responseState"
  [clearHandler]="clearNotification"
></app-notification>

<button
  type="button"
  class="button is-link is-fullwidth"
  *ngIf="responseState === 'success'"
  (click)="createNew()"
>
  Create new account
</button>

<form
  class="box"
  (ngSubmit)="onSubmit()"
  [formGroup]="signUpForm"
  *ngIf="responseState !== 'success'"
>
  <div class="field">
    <label class="label" for="firstName">First name*</label>
    <div class="control">
      <input
        required
        type="text"
        id="firstName"
        class="input"
        formControlName="firstName"
        data-locator="first-name-field"
        [class.is-danger]="hasValidation('firstName')"
      />
    </div>
    <app-field-validation-message
      *ngIf="hasValidation('firstName') as errors"
      data-locator="first-name-field-error-msg"
      [message]="errors.message"
    ></app-field-validation-message>
  </div>

  <div class="field">
    <label class="label" for="lastName">Last name*</label>
    <div class="control">
      <input
        required
        type="text"
        id="lastName"
        class="input"
        formControlName="lastName"
        data-locator="last-name-field"
        [class.is-danger]="hasValidation('lastName')"
      />
    </div>
    <app-field-validation-message
      *ngIf="hasValidation('lastName') as errors"
      data-locator="last-name-field-error-msg"
      [message]="errors.message"
    ></app-field-validation-message>
  </div>

  <div class="field">
    <label class="label" for="email">Email*</label>
    <div class="control">
      <input
        required
        id="email"
        type="email"
        class="input"
        formControlName="email"
        data-locator="email-field"
        [class.is-danger]="hasValidation('email')"
      />
    </div>
    <app-field-validation-message
      *ngIf="hasValidation('email') as errors"
      data-locator="email-field-error-msg"
      [message]="errors.message"
    ></app-field-validation-message>
    <p class="help has-text-grey">
      Email address e.g. 'email@example.co'
    </p>
  </div>

  <div class="field">
    <label class="label" for="password">Password*</label>
    <div class="control">
      <input
        required
        class="input"
        id="password"
        type="password"
        formControlName="password"
        data-locator="password-field"
        [class.is-danger]="hasValidation('password')"
      />
    </div>
    <app-field-validation-message
      *ngIf="hasValidation('password') as errors"
      [message]="errors.message"
      data-locator="password-field-error-msg"
    ></app-field-validation-message>
    <p class="help has-text-grey">
      Password (UpperCase, LowerCase, Number/SpecialChar and min 8
      Chars) Should not contain userâ€™s first or last name.
    </p>
  </div>

  <div class="field">
    <div class="control">
      <button
        type="submit"
        data-locator="submit-button"
        class="button is-link is-fullwidth"
        [class.is-loading]="requestState === 'processing'"
      >
        Submit
      </button>
    </div>
  </div>
</form>
